<UserControl x:Class="WindowzTabManager.TabItemControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="36"
             MinWidth="100"
             HorizontalAlignment="Left"
             Cursor="Hand"
             MouseEnter="OnMouseEnter" MouseLeave="OnMouseLeave"
             MouseLeftButtonUp="OnMouseLeftButtonUp">
    <Border CornerRadius="4"
            Margin="2,0"
            Background="Transparent">
        <Grid x:Name="RootGrid" Background="Transparent">
            <Rectangle x:Name="ActiveBorder"
                       VerticalAlignment="Bottom"
                       Height="2"
                       Fill="{DynamicResource AccentFillColorDefaultBrush}"
                       Visibility="Collapsed" />

            <Grid Margin="10,0,8,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Image x:Name="AppIcon"
                       Width="16"
                       Height="16"
                       VerticalAlignment="Center"
                       RenderOptions.BitmapScalingMode="HighQuality" />

                <TextBlock x:Name="TitleText"
                           Grid.Column="1"
                           Margin="8,0,6,0"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                           FontFamily="Segoe UI"
                           FontSize="12"
                           TextTrimming="CharacterEllipsis"
                           TextWrapping="NoWrap" />

                <Button x:Name="CloseButton"
                        Grid.Column="2"
                        Width="20"
                        Height="20"
                        VerticalAlignment="Center"
                        Padding="0"
                        Background="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        Visibility="Hidden"
                        Click="CloseButton_Click"
                        ToolTip="閉じる">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="CloseBorder"
                                    Width="20"
                                    Height="20"
                                    CornerRadius="3"
                                    Background="Transparent">
                                <Path Data="M5,5 L15,15 M15,5 L5,15"
                                      Stroke="{DynamicResource TextFillColorSecondaryBrush}"
                                      StrokeThickness="1.25"
                                      StrokeStartLineCap="Round"
                                      StrokeEndLineCap="Round"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="CloseBorder" Property="Background" Value="{DynamicResource ControlFillColorTertiaryBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>
        </Grid>
    </Border>
</UserControl>
